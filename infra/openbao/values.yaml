server:
  ha:
    enabled: true
    replicas: 3

  # Disabled because we are using PostgreSQL as the backend
  dataStorage:
    enabled: false

  standalone:
    enabled: false

  auditStorage:
    enabled: true
    size: 1Gi

  ui:
    enabled: true

  resources:
    requests:
      memory: 256Mi
      cpu: 250m
    limits:
      memory: 512Mi
      cpu: 500m

  # These inject the DB credentials into the pod environment
  extraSecretEnvironmentVars:
    - envName: PGHOST
      secretName: openbao-postgres-secret
      secretKey: PGHOST
    - envName: PGPORT
      secretName: openbao-postgres-secret
      secretKey: PGPORT
    - envName: PGUSER
      secretName: openbao-postgres-secret
      secretKey: PGUSER
    - envName: PGPASSWORD
      secretName: openbao-postgres-secret
      secretKey: PGPASSWORD
    - envName: OPENBAO_DB
      secretName: openbao-postgres-secret
      secretKey: OPENBAO_DB

  # Pointing to the file mounted via extraVolumeMounts below
  extraArgs: "-config=/vault/userconfig/extraconfig.hcl"

  extraVolumes:
    - name: openbao-config
      secret:
        secretName: openbao-config  # This K8s secret must contain 'extraconfig.hcl'

  extraVolumeMounts:
    - name: openbao-config
      mountPath: /vault/userconfig
      readOnly: true

injector:
  enabled: true
  replicas: 2
  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 256Mi
      cpu: 200m

global:
  enabled: true
  tlsDisable: true # Warning: Set to false and configure certs for production!

podDisruptionBudget:
  enabled: true
  maxUnavailable: 1